\documentclass{report}

\usepackage[utf8]{inputenc}
\usepackage{blindtext}
\usepackage{hyperref}
\usepackage[newfloat]{minted}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[capitalise]{cleveref}
\usepackage{enumitem}
\usepackage{float}
\usepackage{microtype}
\usepackage[a4paper, margin=1in]{geometry}
\usepackage{fancyvrb, newverbs, xcolor}
\usepackage{caption}
\usepackage[english]{babel}

\definecolor{cverbbg}{gray}{0.93}
\newcommand{\vtilde}{$\sim\ $}

\newenvironment{code}{\vspace{0mm}\captionsetup{type=listing}}{\vspace{2mm}}
\SetupFloatingEnvironment{listing}{name=Code Snippet}

\newcommand{\spipe}{\quad\lvert\quad}
\newcommand{\ctexttt}[1]{\colorbox{cverbbg}{\texttt{#1}}}
\newverbcommand{\cverb}
  {\setbox\verbbox\hbox\bgroup}
  {\egroup\colorbox{cverbbg}{\box\verbbox}}

\hypersetup{
    colorlinks = true,
    urlcolor = blue,
    linkcolor = blue,
    citecolor = red
}

\newcommand\MyBox[1]{
  \fbox{\lower0.75cm
    \vbox to 1.7cm{\vfil
      \hbox to 1.7cm{\hfil\parbox{1.4cm}{#1}\hfil}
      \vfil}%
  }%
}

\newcommand{\hs}{\mintinline{haskell}}
\newcommand{\mono}{\mintinline{text}}

\begin{document}

%Start of titlepage!
\begin{titlepage}
    \centering
    
    \textls{\textsc{\huge{Utrecht University}}}\\
    \vspace{5em}
    \textsc{\Large{Thesis Report}}\\
    \vspace{2em}
    \textsc{\large{Department of Information and Computing Sciences}}\\
    
    \vspace{3em}
    \hrulefill
    \vspace{4em}
    
    \huge{Embracing Core \& Supervising the Optimisation Pipeline}\\
    \vspace{1em}
    \Large{Empowering Haskell developers with a looking glass into the core2core pipeline}

    \vspace{4em}
    \hrulefill
    \vspace{3em}
   
    \begin{tabular}{p{0.5\textwidth}r}
        \textit{Author:} & \textit{Supervisors:}\\
        H.A. Peters, BSc & W. Swierstra\\
        h.a.peters@uu.nl & T. McDonall\\
        5917727 &
    \end{tabular}
    
    \vspace{3em}
    \textsc{December 2022}\\
    % \textsc{\textcolor{red}{Version: Draft 2}}
    
    \begin{figure}[b]
        \hspace{-1.25cm}
        \includegraphics{figs/UU_logo_2021_NL_RGB.png}
    \end{figure}
    
\end{titlepage}

\vspace*{\fill}
\begin{center}
\begin{minipage}{.7\textwidth}
\centerline{\textbf{Abstract}}
Some abstract can be written here
\end{minipage}
\end{center}
\vfill % equivalent to \vspace{\fill}

\thispagestyle{empty}

\newpage
\clearpage
\pagenumbering{roman}
\tableofcontents

\newpage
\clearpage
\pagenumbering{arabic}

%Add with newpage
\input{chapters/Abstract.tex}
\newpage

\chapter{Introduction}
\section{The Haskell programming language}
Haskell is a language explicit about side effects which allows for pretty drastic semantic preserving transformations
\section{Glasgow Haskell Compiler \& Optimisations}
GHC uses an IL to define optimisation transformations whose success is greatly determined by the order of optimisations as
well as user provided information (pragmas and rewrite rules)
\section{Non-functional testing}
Testing the shape of the compilation artifacts can be important for performant code (hint: text lib)

\input{chapters/Background.tex}
\newpage


\section{A case for better tooling}
\subsection{Fusion in DPH}
\subsection{GHC maintainers}
\subsection{Channable \& Text}
\subsection{Compiler formalisation research}
\subsection{Normalizing core inspection}

\chapter{Research Questions}

How can GHCâ€™s core2core passes be captured and presented in such a way that core
inspection becomes a more successful, and easier task?

How does one quickly detect and present where small changes occur in two or more captures?
  (something about toplevel alpha renaming hashing)

How to make viewing core more manageable using various display options?

How could performance regressions that have occurred in the past in popular Haskell projects,
have been resolved faster (using HsComprehension)?

\chapter{Methods}

\section{Gathering all available information}
All about the what GHC encodes in core (IdInfo etc.)

\section{Capturing and saving the information}
\subsection{Globally unique variables}

\section{Frontend application}
All about ELM, JSON, and why it may be suboptimal

\subsection{Communication}
Deriving ToJson and Elm code from Haskell types
\subsection{Pretty printing}

\subsection{Performance \& Optimisations}

\chapter{Results}
\section{Tour of the tool}
Basic outline to prepare for the 'experiments' ahead

\section{Lists vs Streams}

\section{Performance reggression at Channable}

\chapter{Discussion}
\section{Scalability of the tech stack}
\section{Post Core factors}
\subsection{STG \& backends}
Core2Core isn't everything

\chapter{Conclusion}





\bibliographystyle{abbrv}
\bibliography{refs}


\appendix
\clearpage
\pagenumbering{roman}
\chapter{Appendix}
An appendix here!

\end{document}
